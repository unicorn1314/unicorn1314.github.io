<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习进度跟踪器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B6B',
                        secondary: '#4ECDC4',
                        accent: '#FFD166',
                        dark: '#2A2D34',
                        light: '#F7FFF7'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .progress-animation {
                transition: width 1s ease-in-out;
            }
            .card-shadow {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }
            .btn-hover {
                transform: translateY(-2px);
                transition: transform 0.2s ease;
            }
        }
        body{
            background-image: url('https://image.baidu.com/search/down?url=https://tvax4.sinaimg.cn/large/008vpwI7gy1i27ti60u3mj31o01904al.jpg');
            background-size: cover;
            background-position: center;
        }
    </style>

    
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- 标题区域 -->
        <header class="text-center mb-10">
            <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-transparent bg-clip-text bg-gradient-to-r from-dark to-dark mb-2">陈小妍的学习进度</h1>
            <p class="text-lg text-dark/70 max-w-2xl mx-auto">路漫漫其修远兮，吾将上下而求索</p>
        </header>
        
        <!-- 添加新项目区域 -->
        <div class="bg-white rounded-2xl p-6 mb-8 card-shadow transform hover:scale-[1.01] transition-all duration-300">
            <h2 class="text-xl font-bold mb-4 flex items-center">
                <i class="fa fa-plus-circle text-primary mr-2"></i>添加新学习项目
            </h2>
            <form id="add-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label for="new-name" class="block text-sm font-medium text-dark/70 mb-1">学习项目名称</label>
                        <input type="text" id="new-name" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all" placeholder="例如：Python编程" required>
                    </div>
                    <div>
                        <label for="new-current" class="block text-sm font-medium text-dark/70 mb-1">当前完成量</label>
                        <input type="number" id="new-current" min="0" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all" placeholder="0" required>
                    </div>
                    <div>
                        <label for="new-total" class="block text-sm font-medium text-dark/70 mb-1">总学习量</label>
                        <input type="number" id="new-total" min="1" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all" placeholder="100" required>
                    </div>
                    <div>
                        <label for="new-url" class="block text-sm font-medium text-dark/70 mb-1">学习视频网站</label>
                        <input type="url" id="new-url" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all" placeholder="https://example.com">
                    </div>
                </div>
                <div class="flex justify-end">
                    <button type="submit" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-6 rounded-lg transition-all flex items-center justify-center">
                        <i class="fa fa-save mr-2"></i>添加项目
                    </button>
                </div>
            </form>
        </div>
        
        <!-- 统计信息 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="bg-white rounded-xl p-4 card-shadow flex items-center transform hover:scale-[1.02] transition-all">
                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mr-4">
                    <i class="fa fa-book text-primary text-xl"></i>
                </div>
                <div>
                    <p class="text-dark/60 text-sm">总项目数</p>
                    <p id="total-count" class="text-2xl font-bold">0</p>
                </div>
            </div>
            <div class="bg-white rounded-xl p-4 card-shadow flex items-center transform hover:scale-[1.02] transition-all">
                <div class="w-12 h-12 rounded-full bg-secondary/10 flex items-center justify-center mr-4">
                    <i class="fa fa-check-circle text-secondary text-xl"></i>
                </div>
                <div>
                    <p class="text-dark/60 text-sm">已完成项目</p>
                    <p id="completed-count" class="text-2xl font-bold">0</p>
                </div>
            </div>
            <div class="bg-white rounded-xl p-4 card-shadow flex items-center transform hover:scale-[1.02] transition-all">
                <div class="w-12 h-12 rounded-full bg-accent/10 flex items-center justify-center mr-4">
                    <i class="fa fa-tachometer text-accent text-xl"></i>
                </div>
                <div>
                    <p class="text-dark/60 text-sm">平均进度</p>
                    <p id="average-progress" class="text-2xl font-bold">0%</p>
                </div>
            </div>
        </div>
        
        <!-- 进度表标题 -->
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-bold flex items-center">
                <i class="fa fa-list-alt text-secondary mr-2"></i>学习进度列表
            </h2>
            <div class="flex space-x-2">
                <button id="sort-by-name" class="text-sm px-3 py-1 rounded-lg border border-gray-200 hover:bg-gray-50 transition-all flex items-center">
                    <i class="fa fa-sort-alpha-asc mr-1"></i>按名称排序
                </button>
                <button id="sort-by-progress" class="text-sm px-3 py-1 rounded-lg border border-gray-200 hover:bg-gray-50 transition-all flex items-center">
                    <i class="fa fa-sort-numeric-asc mr-1"></i>按进度排序
                </button>
            </div>
        </div>
        
        <!-- 进度表 -->
        <div id="progress-container" class="space-y-4">
            <!-- 进度项目将通过JavaScript动态添加 -->
            <div class="text-center py-12 text-dark/50">
                <i class="fa fa-bookmark-o text-4xl mb-3"></i>
                <p>还没有添加任何学习项目</p>
                <p class="text-sm mt-1">点击上方"添加新学习项目"开始记录你的学习旅程</p>
            </div>
        </div>
        
        <!-- 修改项目模态框 -->
        <div id="edit-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl p-6 w-full max-w-md mx-4 card-shadow">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold">修改学习项目</h3>
                    <button id="close-modal" class="text-dark/50 hover:text-dark transition-colors">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
                <form id="edit-form" class="space-y-4">
                    <input type="hidden" id="edit-id">
                    <div>
                        <label for="edit-name" class="block text-sm font-medium text-dark/70 mb-1">学习项目名称</label>
                        <input type="text" id="edit-name" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all" required>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="edit-current" class="block text-sm font-medium text-dark/70 mb-1">当前完成量</label>
                            <input type="number" id="edit-current" min="0" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all" required>
                        </div>
                        <div>
                            <label for="edit-total" class="block text-sm font-medium text-dark/70 mb-1">总学习量</label>
                            <input type="number" id="edit-total" min="1" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all" required>
                        </div>
                    </div>
                    <div>
                        <label for="edit-url" class="block text-sm font-medium text-dark/70 mb-1">学习视频网站</label>
                        <input type="url" id="edit-url" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all">
                    </div>
                    <div class="flex space-x-3">
                        <button type="button" id="delete-item" class="flex-1 bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-6 rounded-lg transition-all flex items-center justify-center">
                            <i class="fa fa-trash mr-2"></i>删除
                        </button>
                        <button type="submit" class="flex-1 bg-primary hover:bg-primary/90 text-white font-medium py-2 px-6 rounded-lg transition-all flex items-center justify-center">
                            <i class="fa fa-check mr-2"></i>保存修改
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script>
        // 从本地存储加载数据或使用默认数据
        let learningItems = JSON.parse(localStorage.getItem('learningItems')) || [
            { id: 1, name: "HTML与CSS基础", current: 51, total: 60, url: "https://www.example.com/html-css" },
            { id: 2, name: "JavaScript编程", current: 36, total: 60, url: "https://www.example.com/javascript" },
            { id: 3, name: "React框架学习", current: 18, total: 60, url: "https://www.example.com/react" }
        ];
        
        // DOM 元素
        const addForm = document.getElementById('add-form');
        const progressContainer = document.getElementById('progress-container');
        const editModal = document.getElementById('edit-modal');
        const editForm = document.getElementById('edit-form');
        const closeModal = document.getElementById('close-modal');
        const deleteItem = document.getElementById('delete-item');
        const sortByName = document.getElementById('sort-by-name');
        const sortByProgress = document.getElementById('sort-by-progress');
        const totalCount = document.getElementById('total-count');
        const completedCount = document.getElementById('completed-count');
        const averageProgress = document.getElementById('average-progress');
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            renderItems();
            updateStats();
        });
        
        // 渲染项目列表
        function renderItems(items = learningItems) {
            if (items.length === 0) {
                progressContainer.innerHTML = `
                    <div class="text-center py-12 text-dark/50">
                        <i class="fa fa-bookmark-o text-4xl mb-3"></i>
                        <p>还没有添加任何学习项目</p>
                        <p class="text-sm mt-1">点击上方"添加新学习项目"开始记录你的学习旅程</p>
                    </div>
                `;
                return;
            }
            
            progressContainer.innerHTML = '';
            
            items.forEach(item => {
                const progress = Math.round((item.current / item.total) * 100);
                const progressColor = getProgressColor(progress);
                
                const itemElement = document.createElement('div');
                itemElement.className = 'bg-white rounded-xl p-5 card-shadow transform hover:scale-[1.01] transition-all duration-300';
                
                // 项目名称处理 - 如果有URL则显示为链接，否则为普通文本
                const nameContent = item.url 
                    ? `<a href="${item.url}" target="_blank" class="text-lg font-bold text-dark hover:text-primary/80 transition-colors flex items-center">${item.name} <i class="fa fa-external-link ml-1 text-xs"></i></a>`
                    : `<span class="text-lg font-bold text-dark">${item.name}</span>`;
                
                itemElement.innerHTML = `
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                        <div class="flex-1">
                            ${nameContent}
                            <div class="flex items-center mt-1">
                                <span class="text-sm text-dark/60 mr-2">进度:</span>
                                <span class="text-sm font-medium ${progressColor.class}">${progress}% (${item.current}/${item.total})</span>
                            </div>
                        </div>
                        <div class="w-full md:w-2/3">
                            <div class="h-4 bg-gray-100 rounded-full overflow-hidden">
                                <div class="h-full rounded-full progress-animation" style="width: ${progress}%; background: ${progressColor.color}"></div>
                            </div>
                        </div>
                        <div class="flex space-x-2 mt-2 md:mt-0">
                            <button class="dec-btn p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors" data-id="${item.id}">
                                <i class="fa fa-minus text-dark/70"></i>
                            </button>
                            <span class="px-2 py-2 text-sm font-medium flex items-center justify-center">${item.current}</span>
                            <button class="inc-btn p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors" data-id="${item.id}">
                                <i class="fa fa-plus text-dark/70"></i>
                            </button>
                            <button class="edit-btn p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors" data-id="${item.id}">
                                <i class="fa fa-pencil text-dark/70"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                progressContainer.appendChild(itemElement);
                
                // 为加减按钮添加事件监听
                const incBtn = itemElement.querySelector('.inc-btn');
                const decBtn = itemElement.querySelector('.dec-btn');
                incBtn.addEventListener('click', () => updateCount(item.id, 1));
                decBtn.addEventListener('click', () => updateCount(item.id, -1));
                
                // 为编辑按钮添加事件监听
                const editBtn = itemElement.querySelector('.edit-btn');
                editBtn.addEventListener('click', () => openEditModal(item.id));
            });
        }
        
        // 根据进度获取颜色
        function getProgressColor(progress) {
            if (progress >= 80) return { color: '#4ECDC4', class: 'text-secondary' };
            if (progress >= 50) return { color: '#FFD166', class: 'text-accent' };
            return { color: '#FF6B6B', class: 'text-primary' };
        }
        
        // 添加新项目
        addForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const nameInput = document.getElementById('new-name');
            const currentInput = document.getElementById('new-current');
            const totalInput = document.getElementById('new-total');
            const urlInput = document.getElementById('new-url');
            
            const newItem = {
                id: Date.now(), // 使用时间戳作为唯一ID
                name: nameInput.value,
                current: parseInt(currentInput.value),
                total: parseInt(totalInput.value),
                url: urlInput.value || null
            };
            
            learningItems.push(newItem);
            saveToLocalStorage();
            renderItems();
            updateStats();
            
            // 重置表单
            addForm.reset();
            
            // 添加成功动画效果
            const successToast = document.createElement('div');
            successToast.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg transform translate-y-16 opacity-0 transition-all duration-500 z-50';
            successToast.innerHTML = '<i class="fa fa-check-circle mr-2"></i>项目添加成功!';
            document.body.appendChild(successToast);
            
            setTimeout(() => {
                successToast.classList.remove('translate-y-16', 'opacity-0');
            }, 100);
            
            setTimeout(() => {
                successToast.classList.add('translate-y-16', 'opacity-0');
                setTimeout(() => successToast.remove(), 500);
            }, 3000);
        });
        
        // 打开编辑模态框
        function openEditModal(id) {
            const item = learningItems.find(item => item.id === id);
            if (!item) return;
            
            document.getElementById('edit-id').value = item.id;
            document.getElementById('edit-name').value = item.name;
            document.getElementById('edit-current').value = item.current;
            document.getElementById('edit-total').value = item.total;
            document.getElementById('edit-url').value = item.url || '';
            
            editModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // 防止背景滚动
        }
        
        // 关闭编辑模态框
        closeModal.addEventListener('click', () => {
            editModal.classList.add('hidden');
            document.body.style.overflow = '';
        });
        
        // 点击模态框外部关闭
        editModal.addEventListener('click', (e) => {
            if (e.target === editModal) {
                editModal.classList.add('hidden');
                document.body.style.overflow = '';
            }
        });
        
        // 编辑项目
        editForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('edit-id').value);
            const name = document.getElementById('edit-name').value;
            const current = parseInt(document.getElementById('edit-current').value);
            const total = parseInt(document.getElementById('edit-total').value);
            const url = document.getElementById('edit-url').value || null;
            
            const index = learningItems.findIndex(item => item.id === id);
            if (index !== -1) {
                learningItems[index] = { ...learningItems[index], name, current, total, url };
                saveToLocalStorage();
                renderItems();
                updateStats();
                editModal.classList.add('hidden');
                document.body.style.overflow = '';
            }
        });
        
        // 删除项目
        deleteItem.addEventListener('click', () => {
            const id = parseInt(document.getElementById('edit-id').value);
            const index = learningItems.findIndex(item => item.id === id);
            
            if (index !== -1) {
                // 删除前确认
                if (confirm(`确定要删除"${learningItems[index].name}"这个学习项目吗？`)) {
                    learningItems.splice(index, 1);
                    saveToLocalStorage();
                    renderItems();
                    updateStats();
                    editModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }
            }
        });
        
        // 更新计数
        function updateCount(id, change) {
            const index = learningItems.findIndex(item => item.id === id);
            if (index === -1) return;
            
            const item = learningItems[index];
            const newCurrent = Math.max(0, Math.min(item.current + change, item.total));
            
            if (newCurrent !== item.current) {
                learningItems[index] = { ...item, current: newCurrent };
                saveToLocalStorage();
                renderItems();
                updateStats();
                
                // 添加动画效果
                const itemElement = progressContainer.children[index];
                if (itemElement) {
                    itemElement.classList.add('bg-secondary/10');
                    setTimeout(() => itemElement.classList.remove('bg-secondary/10'), 300);
                }
            }
        }
        
        // 排序功能
        sortByName.addEventListener('click', () => {
            const sortedItems = [...learningItems].sort((a, b) => 
                a.name.localeCompare(b.name, 'zh-CN')
            );
            renderItems(sortedItems);
        });
        
        sortByProgress.addEventListener('click', () => {
            const sortedItems = [...learningItems].sort((a, b) => {
                const progressA = (a.current / a.total) * 100;
                const progressB = (b.current / b.total) * 100;
                return progressB - progressA;
            });
            renderItems(sortedItems);
        });
        
        // 更新统计信息
        function updateStats() {
            totalCount.textContent = learningItems.length;
            
            const completedItems = learningItems.filter(item => item.current >= item.total);
            completedCount.textContent = completedItems.length;
            
            if (learningItems.length === 0) {
                averageProgress.textContent = '0%';
                return;
            }
            
            const totalProgress = learningItems.reduce((sum, item) => sum + (item.current / item.total) * 100, 0);
            const avgProgress = Math.round(totalProgress / learningItems.length);
            averageProgress.textContent = `${avgProgress}%`;
        }
        
        // 保存到本地存储
        function saveToLocalStorage() {
            localStorage.setItem('learningItems', JSON.stringify(learningItems));
        }
    </script>
</body>
</html>
    
